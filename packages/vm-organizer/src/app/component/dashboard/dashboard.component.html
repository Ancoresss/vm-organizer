<section class="intro">
    <div class="bg-image h-100 gradient" style="background-color: #26648E;">
      <div class="mask d-flex align-items-center h-100">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-12" id="main">
              <div class="card shadow-2-strong" style="background-color: #f5f7fa;">
                <div class="card-body">
                  <mat-tab-group>
                    <mat-tab label="VMs">
                  <div class="table-responsive">
                    <div class="input-group rounded mb-2 p-2">
                        <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search" aria-describedby="search-addon" [(ngModel)]="searchVm"/>
                    </div>
                    <div class="row">
                      <div class="d-flex">
                        <div class="d-flex col-6">
                          <p style="color: #B0B0B0;">-- Click on text to copy it --</p>
                        </div>
                        <div class="d-flex align-items-start justify-content-end col-6">
                          <div class="me-3 clickable" (click)="refreshStatus()"><img src="../../../assets/sync.png" width="24" height="24" alt="reload"></div>
                        </div>
                      </div>
                    </div>
                    <table class="table table-borderless mb-0">
                      <thead>
                        <tr>
                          <th scope="col"></th>
                          <th scope="col">TAG</th>
                          <th scope="col">IP APP</th>
                          <th scope="col">IP DB</th>
                          <th scope="col">PASSWORD</th>
                          <th scope="col">NOTE</th>
                          <th scope="col">STATUS</th>

                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let vm of vmArr | searchVms: searchVm">
                          <th scope="row">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" (change)="onChange(vm.id)" [value]="vm.id"/>
                            </div>
                          </th>
                          <td (click)="copyText(vm.id)">{{ vm.id }}</td>
                          <td (click)="copyText(vm.ipApp)">{{ vm.ipApp }}</td>
                          <td (click)="copyText(vm.ipDB)">{{ vm.ipDB }}</td>
                          <td (click)="copyText(vm.password)">{{ vm.password }}</td>
                          <td><button type = "button" class="note-button"><img src="/assets/wirte.png" alt="image" (click)="openDialogForNote(vm)" class="note-img"></button></td>
                          <td>
                            <button type="button" id = "btnToggle"
                                    *ngIf="vm.status != 'LOADING'"
                                    class="btn btn-primary btn-toggle px-3" 
                                    [ngClass]="{'switch-on' : vm.status == 'ON', 'switch-off': vm.status == 'OFF'}"
                                    (click)="editStatus(vm)">
                                  </button>
                           <span *ngIf="vm.status== 'LOADING'" class="spinner-border spinner-border-sm custom-spinner" role="status" ></span>

                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                      <div class="footer-btn">
                        <button type="button" class="btn btn-custom px-3 mt-4 me-3" (click)="openDialogForAdding()">Add VM</button>
                        <button type="button" class="btn btn-custom px-3 mt-4" (click)="deleteVm()">Delete VM</button>
                      </div>
                    </mat-tab>
                    <mat-tab label="Tasks">
                      <div class="input-button-row">
                        <input type="text" class="form-control rounded m-3 w-75" placeholder="Search a task"/>
                        <button type="button" class="btn btn-custom w-25" (click)="openDialogForAdding()">New Task</button>
                      </div>
                        <table class="table table-borderless mb-0">
                        <thead>
                        <tr>
                          <th scope="col">Task</th>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                      </table>
                    </mat-tab>
                  </mat-tab-group>                  
                </div>            
              </div>
            </div>
          </div>
        </div>   
        <div class="reportBug"><button type="button" class="btn btn-custom btn-bug px-3 mt-4 me-3" onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLSe5niSj-6KS6MfP47EyTXtfzykIvIlkr7zjKTvYRt8qncq4lQ/viewform?usp=sf_link');return false;" >Report a bug</button></div>  
      </div>
    </div>
  </section>
